{"version":3,"sources":["webpack:///./src/views/Orders.vue","webpack:///src/views/Orders.vue","webpack:///./src/views/Orders.vue?3190","webpack:///./src/views/Orders.vue?0b06"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","on","$event","stopPropagation","getOrdersByStatus","ref","orders","scopedSlots","_u","key","fn","data","_l","tr","indextr","idPedido","_s","hora","explicitDateFormat","productos","costoTotal","currencyFormat","total","translateStatus","estatus","color","name","openOrderDetauk","requestUpdateOrderProduct","getActionText","_e","slot","columns","col","idx","sortable","title","orderDetailPrompt","currentOrder","staticRenderFns","components","OrderDetail","mixins","dateHelper","currencyHelper","newStatus","mounted","methods","order","status","axios","res","console","getOrderDetail","orderId","type","text","acceptText","cancelText","accept","doUpdateOrderStatus","payload","component"],"mappings":"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","file":"js/chunk-2d0ab565.42218df6.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"p-4 pt-0\",attrs:{\"id\":\"orders\"}},[_c('section',[_c('h1',{staticClass:\"dg-title mb-4\"},[_vm._v(\"Pedidos\")]),_c('h5',{staticClass:\"mb-8\"},[_vm._v(\"Gestiona y actualiza el estatus de todos tus pedidos\")]),_c('div',{staticClass:\"vx-row mb-4\"},[_c('div',{staticClass:\"vx-col sm:w-1/2 md:w-1/4\"},[_c('vs-button',{attrs:{\"type\":\"border\",\"color\":\"dark\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.getOrdersByStatus(4)}}},[_vm._v(\"Aceptados\")])],1),_c('div',{staticClass:\"vx-col sm:w-1/2 md:w-1/4\"},[_c('vs-button',{attrs:{\"type\":\"border\",\"color\":\"warning\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.getOrdersByStatus(5)}}},[_vm._v(\"En camino\")])],1),_c('div',{staticClass:\"vx-col sm:w-1/2 md:w-1/4\"},[_c('vs-button',{attrs:{\"type\":\"border\",\"color\":\"success\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.getOrdersByStatus(6)}}},[_vm._v(\"Entregados\")])],1),_c('div',{staticClass:\"vx-col sm:w-1/2 md:w-1/4\"},[_c('vs-button',{attrs:{\"type\":\"border\",\"color\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.getOrdersByStatus(3)}}},[_vm._v(\"Cancelados\")])],1)])]),_c('section',[_c('div',{staticClass:\"vx-row\"},[_c('div',{staticClass:\"vx-col w-full\"},[_c('vs-table',{ref:\"ordersTable\",attrs:{\"id\":\"ordersTable\",\"data\":_vm.orders,\"pagination\":\"\",\"search\":\"\",\"noDataText\":\"No se encontraron pedidos\",\"max-items\":25},scopedSlots:_vm._u([{key:\"default\",fn:function({data}){return _vm._l((data),function(tr,indextr){return _c('vs-tr',{key:indextr},[_c('vs-td',{attrs:{\"data\":data[indextr].idPedido}},[_c('strong',[_vm._v(\"# \"+_vm._s(tr.idPedido))])]),_c('vs-td',{attrs:{\"data\":data[indextr].hora}},[_c('strong',[_vm._v(\" \"+_vm._s(_vm.explicitDateFormat(tr.hora)))])]),_c('vs-td',[_vm._v(\" \"+_vm._s(tr.productos)+\" \")]),_c('vs-td',{attrs:{\"data\":data[indextr].costoTotal}},[_c('strong',[_vm._v(\" \"+_vm._s(_vm.currencyFormat(tr.costoTotal)))])]),_c('vs-td',{attrs:{\"data\":data[indextr].total}},[_c('vs-chip',{attrs:{\"color\":_vm.translateStatus(tr.estatus).color}},[_vm._v(_vm._s(_vm.translateStatus(tr.estatus).name))])],1),_c('vs-td',[_c('div',{staticClass:\"flex\"},[_c('vs-button',{attrs:{\"type\":\"line\"},on:{\"click\":function($event){return _vm.openOrderDetauk(tr)}}},[_vm._v(\" Ver detalle \")]),(tr.estatus == 4 || tr.estatus == 5)?_c('vs-button',{staticClass:\"ml-3\",attrs:{\"size\":\"small\",\"color\":_vm.translateStatus(tr.estatus+1).color},on:{\"click\":function($event){return _vm.requestUpdateOrderProduct(tr, tr.estatus+1)}}},[_vm._v(\" \"+_vm._s(_vm.getActionText(tr.estatus+1).name)+\" \")]):_vm._e()],1)])],1)})}}])},[_c('template',{slot:\"header\"}),_c('template',{slot:\"thead\"},_vm._l((_vm.columns),function(col,idx){return _c('vs-th',{key:idx,staticClass:\"bold\",attrs:{\"sort-key\":col.sortable ? col.key : null}},[_vm._v(_vm._s(col.title))])}),1)],2)],1)])]),_c('vs-popup',{attrs:{\"active\":_vm.orderDetailPrompt,\"title\":\"Detalle de la orden\"},on:{\"update:active\":function($event){_vm.orderDetailPrompt=$event}}},[_c('order-detail',{attrs:{\"order\":_vm.currentOrder}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"orders\" class=\"p-4 pt-0\">\n        <!-- header -->\n        <section>\n            <h1 class=\"dg-title mb-4\">Pedidos</h1>\n            <h5 class=\"mb-8\">Gestiona y actualiza el estatus de todos tus pedidos</h5>\n            <!-- filters -->\n            <div class=\"vx-row mb-4\">\n                <div class=\"vx-col sm:w-1/2 md:w-1/4\">\n                    <vs-button @click.stop=\"getOrdersByStatus(4)\" type=\"border\" color=\"dark\" size=\"large\">Aceptados</vs-button>\n                </div>\n                <div class=\"vx-col sm:w-1/2 md:w-1/4\">\n                    <vs-button @click.stop=\"getOrdersByStatus(5)\" type=\"border\" color=\"warning\" size=\"large\">En camino</vs-button>\n                </div>\n                <div class=\"vx-col sm:w-1/2 md:w-1/4\">\n                    <vs-button @click.stop=\"getOrdersByStatus(6)\" type=\"border\" color=\"success\" size=\"large\">Entregados</vs-button>\n                </div>\n                <div class=\"vx-col sm:w-1/2 md:w-1/4\">\n                    <vs-button @click.stop=\"getOrdersByStatus(3)\" type=\"border\" color=\"primary\" size=\"large\">Cancelados</vs-button>\n                </div>\n            </div>\n        </section>\n\n        <!-- content -->\n        <section>\n            <div class=\"vx-row\">\n                <div class=\"vx-col w-full\">\n                    <vs-table id=\"ordersTable\" ref=\"ordersTable\" :data=\"orders\" pagination search noDataText=\"No se encontraron pedidos\" :max-items=\"25\">\n                        <template slot=\"header\">\n                            <!-- todo -->\n                        </template>\n                        <template slot=\"thead\">\n                            <vs-th class=\"bold\" v-for=\"(col, idx) in columns\" v-bind:key=\"idx\" :sort-key=\"col.sortable ? col.key : null\" >{{col.title}}</vs-th>\n                        </template>\n                        <template slot-scope=\"{data}\">\n                            <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\n                                <vs-td :data=\"data[indextr].idPedido\">\n                                    <strong># {{ tr.idPedido }}</strong>\n                                </vs-td>\n                                <vs-td :data=\"data[indextr].hora\">\n                                    <strong> {{ explicitDateFormat(tr.hora) }}</strong>\n                                </vs-td>\n                                <vs-td>\n                                    {{ tr.productos }}\n                                    <!-- <ul :key=\"pindex\" v-for=\"(p, pindex) in tr.products\">\n                                        <li class=\"opacity-75\">{{ p.quantity }} {{ p.name }}</li>\n                                    </ul> -->\n                                </vs-td>\n                                <vs-td :data=\"data[indextr].costoTotal\">\n                                    <strong> {{ currencyFormat(tr.costoTotal) }}</strong>\n                                </vs-td>\n                                <vs-td :data=\"data[indextr].total\">\n                                    <vs-chip :color=\"translateStatus(tr.estatus).color\">{{ translateStatus(tr.estatus).name }}</vs-chip>\n                                </vs-td>\n                                <vs-td>\n                                    <div class=\"flex\">\n                                        <vs-button @click=\"openOrderDetauk(tr)\" type=\"line\">\n                                            Ver detalle\n                                        </vs-button>\n                                        <vs-button v-if=\"tr.estatus == 4 || tr.estatus == 5\" @click=\"requestUpdateOrderProduct(tr, tr.estatus+1)\" size=\"small\" class=\"ml-3\" :color=\"translateStatus(tr.estatus+1).color\">\n                                            {{getActionText(tr.estatus+1).name}}\n                                        </vs-button>\n                                    </div>\n                                </vs-td>\n                            </vs-tr>\n                        </template>\n                    </vs-table>\n                </div>\n            </div>\n        </section>\n\n        <vs-popup :active.sync=\"orderDetailPrompt\" title=\"Detalle de la orden\">\n            <order-detail\n                :order=\"currentOrder\"></order-detail>\n        </vs-popup>\n    </div>\n</template>\n\n<script>\nimport dateHelper from '../components/mixins/dateHelper';\nimport currencyHelper from '@mixins/currencyHelper';\nimport OrderDetail from \"./components/popUps/OrderDetail.vue\"\n\n    const columns = [\n        { title: \"PEDIDO\", key: \"order_id\", sortable: true }\n        , { title: \"HORA\", key: \"time\", sortable: true }\n        , { title: \"PRODUCTOS\", key: \"products\", sortable: true }\n        , { title: \"TOTAL\", key: \"total\", sortable: true }\n        , { title: \"ESTATUS\", key: \"status\", sortable: true }\n        , { title: \"\", key: \"actions\", sortable: false }\n    ];\n\nexport default {\n    name: \"orders\",\n    components: {\n        OrderDetail\n    },\n    mixins: [\n        dateHelper,\n        currencyHelper\n    ],\n    data() {\n        return  {\n            columns: columns\n            , orders: []\n            , orderDetailPrompt: false\n            , currentOrder: null\n            , newStatus: null\n        }\n    },\n    mounted() {\n        this.getOrdersByStatus(4); // Búsqueda default.\n    },\n    methods: {\n        async openOrderDetauk(order){\n            await this.getOrderDetail(order.idPedido);\n            this.orderDetailPrompt = true;\n        },\n        async getOrdersByStatus(status) {\n            try {\n                this.showLoading(true);\n                const res = await axios.get(`/api/NegPedido/getOrders/${status}`);\n                if(res.data.code == 404){\n                    this.orders = [];\n                    this.notFieldsToUpdate(\"No se encontraron pedidos en este estatus.\", \"Intente de nuevo más tarde.\");\n                } else {\n                    this.orders = res.data.data;\n                }\n                this.showLoading(false);\n            } catch (error) {\n                console.error(error);\n            }\n        },\n        async getOrderDetail(orderId) {\n             try {\n                this.showLoading(true);\n                const res = await axios.get(`/api/NegPedido/getDetailOrder/${orderId}`);\n                // console.log(res);\n                if(res.data.code == 404){\n                    this.currentOrder = {};\n                    this.notFieldsToUpdate(\"No se encontraron pedidos en este estatus.\", \"Intente de nuevo más tarde.\");\n                } else {\n                    this.currentOrder = res.data.data;\n                }\n                this.showLoading(false);\n            } catch (error) {\n                console.error(error);\n            }\n        },\n        translateStatus(status){\n            let color = \"primary\";\n            let name = \"NA\";\n            switch(status){\n                case 4: \n                    color = \"dark\";\n                    name = \"Aceptado\";\n                break;\n                case 5: \n                    color = \"warning\";\n                    name = \"En camino\";\n                break;\n                case 6: \n                    color = \"success\";\n                    name = \"Entregado\";\n                break;\n                case 3: \n                    color = \"primary\";\n                    name = \"Cancelado\";\n                break;\n            }\n            return {\n                color: color, name: name\n            };\n        },\n        getActionText(status){\n            let name = \"NA\";\n            switch(status){\n                case 4: \n                    name = \"Aceptados\";\n                break;\n                case 5: \n                    name = \"En camino\";\n                break;\n                case 6: \n                    name = \"Entregado\";\n                break;\n            }\n            return {\n                name: name\n            };\n        },\n        async requestUpdateOrderProduct(order, newStatus) {\n            this.currentOrder = order;\n            this.newStatus = newStatus;\n            this.$vs.dialog({\n                type: 'confirm',\n                color: 'warning',\n                title: \"Actualizar pedido\",\n                text: `¿Estás seguro de actualizar este pedido: #${this.currentOrder.idPedido}?`,\n                acceptText: \"Aceptar\",\n                cancelText: 'Cancelar',\n                accept: this.doUpdateOrderStatus\n            });\n        }, \n        async doUpdateOrderStatus() {\n            try {\n                this.showLoading(true);\n                let payload = {\n                    \"idOrder\": this.currentOrder.idPedido,\n                    \"idStatus\": this.newStatus\n                }\n                await axios.post(`/api/NegPedido/updateStatusOrder`, payload);\n                this.getOrdersByStatus(this.newStatus);\n                this.newStatus = null;\n                this.currentOrder = null;\n                this.showLoading(false);\n            } catch (error) {\n                console.error(error);\n            }\n        },\n    }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Orders.vue?vue&type=template&id=14e86276&\"\nimport script from \"./Orders.vue?vue&type=script&lang=js&\"\nexport * from \"./Orders.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}