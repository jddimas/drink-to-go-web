{"version":3,"sources":["webpack:///./src/views/PasswordRecoveryPage.vue?deea","webpack:///./src/assets/images/logo/logo_drink_go.png","webpack:///./src/views/PasswordRecoveryPage.vue","webpack:///src/views/PasswordRecoveryPage.vue","webpack:///./src/views/PasswordRecoveryPage.vue?92fc","webpack:///./src/views/PasswordRecoveryPage.vue?bf8f"],"names":["module","exports","render","_vm","this","_c","_self","attrs","staticClass","on","$event","goBack","_v","_m","directives","name","rawName","value","expression","model","email","callback","$$v","isDisabled","stopPropagation","requestPasswordRecovery","staticRenderFns","require","data","password","computed","methods","axios","res","sendEmail","emailInfo","swal","title","text","icon","buttons","cancel","visible","className","confirm","closeOnEsc","then","params","code","time","console","component"],"mappings":"uIAAA,W,qBCAAA,EAAOC,QAAU,IAA0B,kC,yCCA3C,IAAIC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,UAAU,CAACF,EAAG,MAAM,CAACG,YAAY,mBAAmB,CAACH,EAAG,UAAU,CAACG,YAAY,2DAA2D,CAACH,EAAG,YAAY,CAACG,YAAY,YAAYD,MAAM,CAAC,OAAS,GAAG,KAAO,QAAQ,MAAQ,UAAU,KAAO,SAAS,KAAO,uBAAuBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIQ,aAAaN,EAAG,MAAM,CAACA,EAAG,KAAK,CAACG,YAAY,cAAc,CAACL,EAAIS,GAAG,0BAA0BT,EAAIU,GAAG,GAAGR,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,iBAAiB,CAACG,YAAY,eAAe,CAACH,EAAG,QAAQ,CAACG,YAAY,OAAOD,MAAM,CAAC,IAAM,UAAU,CAACJ,EAAIS,GAAG,YAAYP,EAAG,WAAW,CAACS,WAAW,CAAC,CAACC,KAAK,WAAWC,QAAQ,aAAaC,MAAO,WAAYC,WAAW,eAAeV,YAAY,cAAcD,MAAM,CAAC,KAAO,QAAQ,KAAO,WAAW,iBAAiB,GAAG,KAAO,iBAAiB,YAAY,UAAU,oBAAoB,IAAIY,MAAM,CAACF,MAAOd,EAAIiB,MAAOC,SAAS,SAAUC,GAAMnB,EAAIiB,MAAME,GAAKJ,WAAW,YAAY,IAAI,GAAGb,EAAG,MAAM,CAACA,EAAG,YAAY,CAACG,YAAY,SAASD,MAAM,CAAC,SAAWJ,EAAIoB,YAAYd,GAAG,CAAC,MAAQ,SAASC,GAAiC,OAAzBA,EAAOc,kBAAyBrB,EAAIsB,6BAA6B,CAACtB,EAAIS,GAAG,oBAAoB,MAAM,GAAGT,EAAIU,GAAG,QAEttCa,EAAkB,CAAC,WAAY,IAAIvB,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,KAAK,CAACG,YAAY,cAAc,CAACL,EAAIS,GAAG,wCAAwCP,EAAG,MAAMF,EAAIS,GAAG,sCACxK,WAAY,IAAIT,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,UAAU,CAACG,YAAY,mEAAmE,CAACH,EAAG,MAAM,CAACE,MAAM,CAAC,IAAMoB,EAAQ,QAA0C,IAAM,e,mECoChN,GACfZ,yBACAa,KAFA,WAGA,OACAR,WACAS,gBAGAC,UACAP,WADA,WAEA,4CAGAQ,SACApB,OADA,WACA,oKACA,mBAAAI,eADA,8CAGAU,wBAJA,WAIA,8KAGA,kBAHA,SAIAO,0DAJA,UAIAC,EAJA,OAKAA,kBALA,iCAMAD,+DANA,UAMAE,EANA,OAOAA,kBAPA,wBAQA,kBACAC,EAAAD,YATA,kBAUAE,KACAC,uBACAC,6GACAC,eACAC,SACAC,QACAH,cACArB,SACAyB,WACAC,2BAEAC,SACAN,eACArB,SACA0B,6BAGAE,gBACAC,MAAA,YACA,IACA,kBACA,mBAAA/B,sBAAAgC,QACA3B,cACA4B,cACAC,uBAlCA,QAuCA,kBACA,sHAxCA,gCA2CA,kBACA,oHA5CA,6DA+CA,kBACA,mDACAC,mBAjDA,+DCxDmgB,I,wBCQ/fC,EAAY,eACd,EACAjD,EACAwB,GACA,EACA,KACA,KACA,MAIa,aAAAyB,E","file":"js/chunk-2b158878.9736b1c9.js","sourcesContent":["export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordRecoveryPage.vue?vue&type=style&index=0&id=66121a60&prod&lang=css&\"","module.exports = __webpack_public_path__ + \"img/logo_drink_go.0596cf8a.png\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"login\"}},[_c('div',{staticClass:\"vx-row h-screen\"},[_c('section',{staticClass:\"vx-col w-1/2 flex no-gutter items-center justify-center\"},[_c('vs-button',{staticClass:\"btn-float\",attrs:{\"radius\":\"\",\"size\":\"large\",\"color\":\"primary\",\"type\":\"border\",\"icon\":\"keyboard_arrow_left\"},on:{\"click\":function($event){return _vm.goBack()}}}),_c('div',[_c('h1',{staticClass:\"bold mb-12\"},[_vm._v(\"Recuperar contraseña\")]),_vm._m(0),_c('div',{staticClass:\"mt-6\"},[_c('vx-input-group',{staticClass:\"w-full mb-4\"},[_c('label',{staticClass:\"bold\",attrs:{\"for\":\"email\"}},[_vm._v(\"Correo\")]),_c('vs-input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"w-full mb-2\",attrs:{\"name\":\"email\",\"type\":\"username\",\"icon-no-border\":\"\",\"icon\":\"icon icon-mail\",\"icon-pack\":\"feather\",\"label-placeholder\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1)],1),_c('div',[_c('vs-button',{staticClass:\"w-full\",attrs:{\"disabled\":_vm.isDisabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.requestPasswordRecovery()}}},[_vm._v(\"Enviar código\")])],1)])],1),_vm._m(1)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h4',{staticClass:\"opacity-50\"},[_vm._v(\"Te enviaremos un código a tu correo \"),_c('br'),_vm._v(\"para reestablecer tu contraseña\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"vx-col w-1/2 dg-dark flex no-gutter items-center justify-center\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/logo/logo_drink_go.png\"),\"alt\":\"login\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"login\">\n        <div class=\"vx-row h-screen\">\n            <section class=\"vx-col w-1/2 flex no-gutter items-center justify-center\">\n                <vs-button @click=\"goBack()\" radius size=\"large\" class=\"btn-float\" color=\"primary\" type=\"border\" icon=\"keyboard_arrow_left\"></vs-button>\n                <div>\n                    <h1 class=\"bold mb-12\">Recuperar contraseña</h1>\n                    <h4 class=\"opacity-50\">Te enviaremos un código a tu correo <br>para reestablecer tu contraseña</h4>\n                    <div class=\"mt-6\">\n                        <vx-input-group class=\"w-full mb-4\">\n                            <label for=\"email\" class=\"bold\">Correo</label>\n                            <vs-input\n                                name=\"email\"\n                                type=\"username\"\n                                icon-no-border\n                                v-validate=\"'required'\"\n                                icon=\"icon icon-mail\"\n                                icon-pack=\"feather\"\n                                label-placeholder=\"\"\n                                v-model=\"email\"\n                                class=\"w-full mb-2\"/>\n\n                        </vx-input-group>\n                    </div>  \n                    <div>\n                        <vs-button :disabled=\"isDisabled\" @click.stop=\"requestPasswordRecovery()\" class=\"w-full\">Enviar código</vs-button>\n                    </div>\n                </div>\n            </section>\n            <section class=\"vx-col w-1/2 dg-dark flex no-gutter items-center justify-center\">\n                <img src=\"@/assets/images/logo/logo_drink_go.png\" alt=\"login\">\n            </section>\n        </div>\n    </div>\n</template>\n\n<script>\nimport swal from \"sweetalert\";\n\nexport default {\n    name: 'password-recovery',\n    data() {\n        return {\n            email: null,\n            password: null\n        }\n    },\n    computed: {\n        isDisabled(){\n            return this.email === null || this.email === \"\";\n        }\n    },\n    methods: {\n        async goBack() {\n            await this.$router.replace({name: 'login'});\n        },\n        async requestPasswordRecovery() {\n           try {\n                // Se valida que el correo sea válido.\n                this.showLoading(true);\n                const res = await axios.get(`/api/AdnUsuario/existsEmail/${this.email}`);\n                if(res.data.code === 200) { // sí es válido, se envía el correo.\n                    const sendEmail = await axios.get(`/api/AdnUsuario/VerificationCode/${this.email}`);\n                    if(sendEmail.data.code === 200){ // Sí el correo se envía.\n                        this.showLoading(false);\n                        const emailInfo = sendEmail.data.data;\n                        return swal({\n                            title: \"Correo enviado\",\n                            text: \"Te hemos enviado un correo con tu código de seguridad. Por favor revisa tu bandeja de entrada o spam.\",\n                            icon: \"success\",\n                            buttons: {\n                            cancel: {\n                                text: \"Cerrar\",\n                                value: false,\n                                visible: true,\n                                className: \"swalCancelBtn\"\n                            },\n                            confirm: {\n                                text: \"Aceptar\",\n                                value: true,\n                                className: \"swalConfirmBtn\"\n                            }\n                            },\n                            closeOnEsc: true\n                        }).then((value) => {\n                            if(value){\n                                this.showLoading(false);\n                                this.$router.replace({name: 'passwordUpdate', params: {\n                                    email: this.email\n                                    , code: emailInfo.codigo\n                                    , time: emailInfo.minutos\n                                }});\n                            }\n                        });\n                    } else {\n                        this.showLoading(false);\n                        this.errorNotif(\"Lo sentimos.\", `El correo para recuperar tu contraseña no ha sido enviado, contacta a soporte técnico.`);\n                    }\n                } else {\n                    this.showLoading(false);\n                    this.errorNotif(\"Lo sentimos.\", `El correo ${this.email} que nos proporcionaste no coincide con ningun usuario.`);\n                }\n            } catch (error) {\n               this.showLoading(false);\n                this.warningNotif(\"Ha ocurrido un error inesperado.\");\n                console.warn(error);\n           }\n        }\n    }\n\n}\n</script>\n\n<style>\n    .dg-dark {\n        background-color: #0C0C0C;\n    }\n\n    .btn-float {\n        float: left;\n        top: -17rem;\n        left: -5rem;\n    }\n\n    .swalConfirmBtn{\n        background-color:#A42643;\n    }\n    .swalConfirmBtn:hover{\n        background-color:#8f354aa9;\n    }\n</style>","import mod from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordRecoveryPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordRecoveryPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PasswordRecoveryPage.vue?vue&type=template&id=66121a60&\"\nimport script from \"./PasswordRecoveryPage.vue?vue&type=script&lang=js&\"\nexport * from \"./PasswordRecoveryPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PasswordRecoveryPage.vue?vue&type=style&index=0&id=66121a60&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}