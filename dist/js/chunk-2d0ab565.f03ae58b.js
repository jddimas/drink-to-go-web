(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab565"],{"159d":function(t,e,r){"use strict";r.r(e);r("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-4 pt-0",attrs:{id:"orders"}},[e("section",[e("h1",{staticClass:"dg-title mb-4"},[t._v("Pedidos")]),e("h5",{staticClass:"mb-8"},[t._v("Gestiona y actualiza el estatus de todos tus pedidos")]),e("div",{staticClass:"vx-row mb-4"},[e("div",{staticClass:"vx-col sm:w-1/2 md:w-1/4"},[e("vs-button",{attrs:{type:"border",color:"dark",size:"large"},on:{click:function(e){return e.stopPropagation(),t.getOrdersByStatus(4)}}},[t._v("Aceptados")])],1),e("div",{staticClass:"vx-col sm:w-1/2 md:w-1/4"},[e("vs-button",{attrs:{type:"border",color:"warning",size:"large"},on:{click:function(e){return e.stopPropagation(),t.getOrdersByStatus(5)}}},[t._v("En camino")])],1),e("div",{staticClass:"vx-col sm:w-1/2 md:w-1/4"},[e("vs-button",{attrs:{type:"border",color:"success",size:"large"},on:{click:function(e){return e.stopPropagation(),t.getOrdersByStatus(6)}}},[t._v("Entregados")])],1),e("div",{staticClass:"vx-col sm:w-1/2 md:w-1/4"},[e("vs-button",{attrs:{type:"border",color:"primary",size:"large"},on:{click:function(e){return e.stopPropagation(),t.getOrdersByStatus(2)}}},[t._v("Rechazados")])],1)])]),e("section",[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full"},[e("vs-table",{ref:"ordersTable",attrs:{id:"ordersTable",data:t.orders,pagination:"",search:"",noDataText:"No se encontraron pedidos","max-items":25},scopedSlots:t._u([{key:"default",fn:function(r){var a=r.data;return t._l(a,(function(r,s){return e("vs-tr",{key:s},[e("vs-td",{attrs:{data:a[s].idPedido}},[e("strong",[t._v("# "+t._s(r.idPedido))])]),e("vs-td",{attrs:{data:a[s].hora}},[e("strong",[t._v(" "+t._s(t.explicitDateFormat(r.hora)))])]),e("vs-td",[t._v(" "+t._s(r.productos)+" ")]),e("vs-td",{attrs:{data:a[s].costoTotal}},[e("strong",[t._v(" "+t._s(t.currencyFormat(r.costoTotal)))])]),e("vs-td",{attrs:{data:a[s].total}},[e("vs-chip",{attrs:{color:t.translateStatus(r.estatus).color}},[t._v(t._s(t.translateStatus(r.estatus).name))])],1),e("vs-td",[e("div",{staticClass:"flex"},[e("vs-button",{attrs:{type:"line"},on:{click:function(e){return t.openOrderDetauk(r)}}},[t._v(" Ver detalle ")]),4==r.estatus||5==r.estatus?e("vs-button",{staticClass:"ml-3",attrs:{size:"small",color:t.translateStatus(r.estatus+1).color},on:{click:function(e){return t.requestUpdateOrderProduct(r,r.estatus+1)}}},[t._v(" "+t._s(t.getActionText(r.estatus+1).name)+" ")]):t._e()],1)])],1)}))}}])},[e("template",{slot:"header"}),e("template",{slot:"thead"},t._l(t.columns,(function(r,a){return e("vs-th",{key:a,staticClass:"bold",attrs:{"sort-key":r.sortable?r.key:null}},[t._v(t._s(r.title))])})),1)],2)],1)])]),e("vs-popup",{attrs:{active:t.orderDetailPrompt,title:"Detalle de la orden"},on:{"update:active":function(e){t.orderDetailPrompt=e}}},[e("order-detail",{attrs:{order:t.currentOrder}})],1)],1)},s=[],o=r("c7eb"),n=r("1da1"),c=r("4360"),d=r("9ed5"),i=r("9ef8"),u=[{title:"PEDIDO",key:"order_id",sortable:!0},{title:"HORA",key:"time",sortable:!0},{title:"PRODUCTOS",key:"products",sortable:!0},{title:"TOTAL",key:"total",sortable:!0},{title:"ESTATUS",key:"status",sortable:!0},{title:"",key:"actions",sortable:!1}],l={name:"orders",components:{OrderDetail:i["a"]},mixins:[c["a"],d["a"]],data:function(){return{columns:u,orders:[],orderDetailPrompt:!1,currentOrder:null,newStatus:null}},mounted:function(){this.getOrdersByStatus(4)},methods:{openOrderDetauk:function(t){var e=this;return Object(n["a"])(Object(o["a"])().mark((function r(){return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getOrderDetail(t.idPedido);case 2:e.orderDetailPrompt=!0;case 3:case"end":return r.stop()}}),r)})))()},getOrdersByStatus:function(t){var e=this;return Object(n["a"])(Object(o["a"])().mark((function r(){var a;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.showLoading(!0),r.next=4,axios.get("/api/NegPedido/getOrders/".concat(t));case 4:a=r.sent,404==a.data.code?(e.orders=[],e.notFieldsToUpdate("No se encontraron pedidos en este estatus.","Intente de nuevo más tarde.")):e.orders=a.data.data,e.showLoading(!1),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},getOrderDetail:function(t){var e=this;return Object(n["a"])(Object(o["a"])().mark((function r(){var a;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.showLoading(!0),r.next=4,axios.get("/api/NegPedido/getDetailOrder/".concat(t));case 4:a=r.sent,404==a.data.code?(e.currentOrder={},e.notFieldsToUpdate("No se encontraron pedidos en este estatus.","Intente de nuevo más tarde.")):e.currentOrder=a.data.data,e.showLoading(!1),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},translateStatus:function(t){var e="primary",r="NA";switch(t){case 4:e="dark",r="Aceptado";break;case 5:e="warning",r="En camino";break;case 6:e="success",r="Entregado";break;case 2:e="primary",r="Rechazados";break}return{color:e,name:r}},getActionText:function(t){var e="NA";switch(t){case 4:e="Aceptados";break;case 5:e="En camino";break;case 6:e="Entregado";break}return{name:e}},requestUpdateOrderProduct:function(t,e){var r=this;return Object(n["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.currentOrder=t,r.newStatus=e,r.$vs.dialog({type:"confirm",color:"warning",title:"Actualizar pedido",text:"¿Estás seguro de actualizar este pedido: #".concat(r.currentOrder.idPedido,"?"),acceptText:"Aceptar",cancelText:"Cancelar",accept:r.doUpdateOrderStatus});case 3:case"end":return a.stop()}}),a)})))()},doUpdateOrderStatus:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.showLoading(!0),r={idOrder:t.currentOrder.idPedido,idStatus:t.newStatus},e.next=5,axios.post("/api/NegPedido/updateStatusOrder",r);case 5:t.getOrdersByStatus(t.newStatus),t.newStatus=null,t.currentOrder=null,t.showLoading(!1),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}}},p=l,v=r("0c7c"),b=Object(v["a"])(p,a,s,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0ab565.f03ae58b.js.map